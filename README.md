# üé¨ –°–µ—Ä–≤–∏—Å-–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –≤–∏–¥–µ–æ-—Ç—Ä–∞—Ñ–∏–∫–∞

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø—Ä–æ—Å—Ç–æ–π FastAPI-—Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–æ–ª—å –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞ –≤–∏–¥–µ–æ-—Ç—Ä–∞—Ñ–∏–∫–∞. 
–û–Ω –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ CDN-—Å–µ—Ä–≤–µ—Ä –∏–ª–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª, –∏—Å–ø–æ–ª—å–∑—É—è HTTP 301 —Ä–µ–¥–∏—Ä–µ–∫—Ç.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Docker –∏ Docker Compose.

### üì¶ –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ Docker Compose

```bash
docker-compose up --build
```

–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: **http://localhost:8000**

#### –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ http://localhost:8000/?video=http://s3.origin-cluster/video/9999/test123.m3u8 –∏ –ø–æ–ª—É—á–∏—Ç—å

![1.png](1.png)

CDN-—Å–µ—Ä–≤–µ—Ä: **http://localhost:9000**

## üß™ –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
### ‚úÖ –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –≤—Ä—É—á–Ω—É—é
```bash
uvicorn app.main:app --reload
```

### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

```bash
http://localhost:8000/?video=http://s3.origin-cluster/video/9999/test123.m3u8
```

### ‚úÖ –ó–∞–ø—É—Å–∫ CDN-—Å–µ—Ä–≤–µ—Ä–∞ –≤—Ä—É—á–Ω—É—é
```bash
uvicorn cdn.main:app --host 0.0.0.0 --port 9000
```

### üîß –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Poetry.

1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Poetry:
```bash
pip install poetry
```

2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```bash
poetry install
```

### üß∞ –ö–æ–º–∞–Ω–¥—ã Docker (–¥–ª—è —Å–ø—Ä–∞–≤–∫–∏)
1. –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç: docker-compose build

2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å: docker-compose up --build

3. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å: docker-compose down

## üë§ –ê–≤—Ç–æ—Ä - G. Lavrov